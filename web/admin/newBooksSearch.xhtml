<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head> </h:head>
    <h:body>
        
        <f:view>
                <f:metadata>
                    <f:viewParam name="req" value="#{newBooksAdminBean.searchText}"/>
                </f:metadata>
        </f:view>
        <ui:composition template="../WEB-INF/layout/layout.xhtml">
            
            <ui:define name="content">

                <div class="text-center">
                    <h3><i class="fa fa-key"></i> Admin > <i class="fa fa-bullhorn"></i> Liste des nouveautés</h3> 

                    <h:form>
                        <table style="margin-left:auto;margin-right:auto;">
                            <tr>
                                <td>
                                    <i class="fa fa-search"></i> Ajouter
                                </td>
                                <td>
                                    <h:inputText id="search" value="#{newBooksAdminBean.searchText}"/>
                                </td>
                                <td>
                                     <h:commandButton value="Rechercher" action="#{newBooksAdminBean.findBook()}" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3">
                                    <h:link outcome="newBooksList" >Retour vers la liste des nouveautés</h:link>
                                </td>
                            </tr>
                        </table>
                    </h:form>
                        
                         <table style="margin-left:auto;margin-right:auto;">
                            <tbody>
                                <c:forEach var="book" items="#{newBooksAdminBean.searchResults}">
                                    <tr>
                                        <td>
                                            <h:outputText value="#{book.title}" /><br/>
                                            (<h:outputText value="#{book.author}" />)<br/>
                                            [<h:outputText value="#{book.publisher}" /> <h:outputText value="#{item.book.dateBook}" >
                                                <f:convertDateTime pattern="yyyy" />
                                            </h:outputText>]
                                        </td>

                                        <td style="background-color: #{book.newSelection ? 'green': 'red'}"></td>
                                        <td>
                                            <h:link outcome="newBookModify" >
                                                <div  class="button tiny ">

                                                    <f:param name="id" value="#{book.id}" />
                                                    <h:outputText value="#{book.newSelection ? 'Désélectionner': 'Sélectionner'}"/>                              

                                                </div>
                                            </h:link>
                                            
                                        </td>
                                    </tr>
                                </c:forEach>

                            </tbody>
                            <thead>
                                <tr><th>Livre</th><th>Nouveauté</th><th>Action</th></tr>
                            </thead>
                        </table>
               
                </div>
            </ui:define>
            
        </ui:composition>
    </h:body>
</html>

